

blueprint:
  name: ONOFF switch
  description:
    This automation simulates the use of any remote control
    connected through ZHA to shut light on and off
  domain: automation
  input:
    remote:
      name: remote switch with on and off button
      description: Select the remote control you wish to use.
      selector:
        device:
          integration: zha
    light:
      name: Light
      description: Select the light entity you wish to control.
      selector:
        entity:
          domain: light
    default_color:
      name: Default Color
      description: The color of the light when turned on
      selector:
        color_temp:
          unit: mired
          min: 250
          max: 454
      default: 357
    default_brightness:
      name: Default brightness
      description: The brightness of the light when turned on.
      selector:
        number:
          min: 0
          max: 255
          step: 1
          mode: slider
      default: 255
mode: restart
max_exceeded: silent
variables:
  var_light: !input "light"
  var_default_color: !input "default_color"
  var_default_brightness: !input "default_brightness"
trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: !input "remote"
action:
  - choose:
      - conditions:
          - condition: template
            value_template: '{{ trigger.event.data.command == "on" }}'
        sequence:
          - service: light.turn_on
            target:
              entity_id: !input "light"
            data:
              brightness: "{{ var_default_brightness }}"
              color_temp: "{{ var_default_color }}"
      - conditions:
          - condition: template
            value_template: '{{ trigger.event.data.command == "off" }}'
        sequence:
          - service: light.turn_off
            target:
              entity_id: !input "light"
    default: []